[build]
  command = "pnpm build"
  publish = "dist/client"

[dev]
  command = "pnpm dev"
  port = 3000

# Serve Storybook static files - Netlify serves static files before SSR automatically
# Files are in dist/client/storybook/ after build
# This redirect ensures /storybook serves index.html for SPA routing
[[redirects]]
  from = "/storybook"
  to = "/storybook/index.html"
  status = 200
  force = false

[[headers]]
  for = "/compiled-posts/*"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"
